<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CliniTrack - Medical Records Management</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        /* Custom CSS Variables */
        :root {
            --font-size: 16px;
            --background: #ffffff;
            --foreground: #0a0a0a;
            --card: #ffffff;
            --card-foreground: #0a0a0a;
            --popover: #ffffff;
            --popover-foreground: #0a0a0a;
            --primary: #030213;
            --primary-foreground: #ffffff;
            --secondary: #f1f5f9;
            --secondary-foreground: #030213;
            --muted: #ececf0;
            --muted-foreground: #717182;
            --accent: #e9ebef;
            --accent-foreground: #030213;
            --destructive: #d4183d;
            --destructive-foreground: #ffffff;
            --border: rgba(0, 0, 0, 0.1);
            --input: transparent;
            --input-background: #f3f3f5;
            --ring: #708090;
            --radius: 0.625rem;
        }

        /* Base styles */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background-color: var(--background);
            color: var(--foreground);
            margin: 0;
            padding: 0;
        }

        /* Utility classes */
        .bg-background { background-color: var(--background); }
        .bg-card { background-color: var(--card); }
        .bg-primary { background-color: var(--primary); }
        .bg-secondary { background-color: var(--secondary); }
        .bg-muted { background-color: var(--muted); }
        .bg-destructive { background-color: var(--destructive); }
        .bg-input { background-color: var(--input-background); }
        
        .text-foreground { color: var(--foreground); }
        .text-card-foreground { color: var(--card-foreground); }
        .text-primary { color: var(--primary); }
        .text-primary-foreground { color: var(--primary-foreground); }
        .text-secondary-foreground { color: var(--secondary-foreground); }
        .text-muted-foreground { color: var(--muted-foreground); }
        .text-destructive { color: var(--destructive); }
        .text-destructive-foreground { color: var(--destructive-foreground); }
        
        .border { border: 1px solid var(--border); }
        .border-border { border-color: var(--border); }
        .border-destructive { border-color: var(--destructive); }
        
        .rounded { border-radius: calc(var(--radius) - 2px); }
        .rounded-md { border-radius: var(--radius); }
        .rounded-lg { border-radius: calc(var(--radius) + 2px); }
        .rounded-full { border-radius: 9999px; }

        /* Component styles */
        .btn-primary {
            background-color: var(--primary);
            color: var(--primary-foreground);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            opacity: 0.9;
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: var(--secondary-foreground);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background-color: var(--accent);
        }

        .input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background-color: var(--input-background);
            color: var(--foreground);
            font-size: 1rem;
        }

        .input:focus {
            outline: 2px solid var(--ring);
            outline-offset: 2px;
        }

        .card {
            background-color: var(--card);
            border: 1px solid var(--border);
            border-radius: calc(var(--radius) + 2px);
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }

        .loading-spinner {
            width: 2rem;
            height: 2rem;
            border: 4px solid var(--muted);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Hide scrollbars */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--muted);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--muted-foreground);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useContext, createContext, useRef } = React;

        // Mock Data
        const mockPatients = [
            {
                id: '1',
                name: 'Sarah Johnson',
                age: 45,
                gender: 'Female',
                email: 'sarah.johnson@email.com',
                phone: '+1 (555) 123-4567',
                address: '123 Main Street, Anytown, ST 12345',
                emergencyContact: {
                    name: 'Michael Johnson',
                    phone: '+1 (555) 123-4568',
                    relationship: 'Spouse'
                },
                medicalHistory: ['Hypertension', 'Type 2 Diabetes'],
                allergies: ['Penicillin', 'Shellfish'],
                createdAt: '2024-01-15T10:30:00Z',
                updatedAt: '2024-01-20T14:45:00Z'
            },
            {
                id: '2',
                name: 'Robert Chen',
                age: 62,
                gender: 'Male',
                email: 'robert.chen@email.com',
                phone: '+1 (555) 234-5678',
                address: '456 Oak Avenue, Somewhere, ST 67890',
                emergencyContact: {
                    name: 'Linda Chen',
                    phone: '+1 (555) 234-5679',
                    relationship: 'Wife'
                },
                medicalHistory: ['Previous cardiac episode', 'High cholesterol'],
                allergies: ['Aspirin'],
                createdAt: '2024-01-10T08:15:00Z',
                updatedAt: '2024-01-18T16:20:00Z'
            }
        ];

        const mockLabResults = [
            {
                id: '1',
                patientId: '1',
                type: 'Blood Test',
                name: 'Complete Blood Count',
                date: '2024-01-20',
                results: 'All values within normal range except slightly elevated glucose levels.',
                uploadedBy: 'Dr. Sarah Johnson'
            },
            {
                id: '2',
                patientId: '2',
                type: 'Imaging',
                name: 'Chest X-Ray',
                date: '2024-01-18',
                results: 'Clear lungs, no abnormalities detected.',
                uploadedBy: 'Dr. Sarah Johnson'
            }
        ];

        const mockVisits = [
            {
                id: '1',
                patientId: '1',
                date: '2024-01-20',
                symptoms: ['Fatigue', 'Increased thirst'],
                diagnosis: 'Diabetes management follow-up',
                treatment: 'Medication adjustment',
                notes: 'Patient responding well to current treatment plan.',
                doctorId: '1',
                doctorName: 'Dr. Sarah Johnson'
            }
        ];

        const mockRiskAssessments = [
            {
                id: '1',
                patientId: '1',
                visitId: '1',
                symptoms: ['Fatigue', 'Increased thirst'],
                riskLevel: 'Moderate',
                confidence: 85,
                factors: ['Age', 'Medical history', 'Current symptoms'],
                recommendation: 'Continue monitoring glucose levels and maintain current medication regimen.',
                date: '2024-01-20',
                doctorNotes: 'Patient education provided on dietary management.'
            }
        ];

        // Auth Context
        const AuthContext = createContext();

        const mockUsers = [
            {
                id: '1',
                email: 'doctor@clinitrack.com',
                password: 'doctor123',
                name: 'Dr. Sarah Johnson',
                role: 'doctor'
            },
            {
                id: '2',
                email: 'secretary@clinitrack.com',
                password: 'secretary123',
                name: 'Mary Adams',
                role: 'secretary'
            }
        ];

        function AuthProvider({ children }) {
            const [user, setUser] = useState(null);
            const [isLoading, setIsLoading] = useState(true);

            useEffect(() => {
                const storedUser = localStorage.getItem('clinitrack_user');
                if (storedUser) {
                    setUser(JSON.parse(storedUser));
                }
                setIsLoading(false);
            }, []);

            const login = async (email, password) => {
                setIsLoading(true);
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                const foundUser = mockUsers.find(u => u.email === email && u.password === password);
                
                if (!foundUser) {
                    setIsLoading(false);
                    return { success: false, error: 'Invalid email or password' };
                }

                const userData = {
                    id: foundUser.id,
                    email: foundUser.email,
                    name: foundUser.name,
                    role: foundUser.role
                };

                setUser(userData);
                localStorage.setItem('clinitrack_user', JSON.stringify(userData));
                setIsLoading(false);
                return { success: true };
            };

            const logout = () => {
                setUser(null);
                localStorage.removeItem('clinitrack_user');
            };

            const register = async (email, password, name, role) => {
                setIsLoading(true);
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                if (mockUsers.find(u => u.email === email)) {
                    setIsLoading(false);
                    return false;
                }

                const newUser = {
                    id: (mockUsers.length + 1).toString(),
                    email,
                    name,
                    role
                };

                mockUsers.push({ ...newUser, password });
                setUser(newUser);
                localStorage.setItem('clinitrack_user', JSON.stringify(newUser));
                setIsLoading(false);
                return true;
            };

            const updateProfile = (updates) => {
                if (user) {
                    const updatedUser = { ...user, ...updates };
                    setUser(updatedUser);
                    localStorage.setItem('clinitrack_user', JSON.stringify(updatedUser));
                }
            };

            const changePassword = async (currentPassword, newPassword) => {
                await new Promise(resolve => setTimeout(resolve, 1000));
                const foundUser = mockUsers.find(u => u.id === user.id);
                if (foundUser && foundUser.password === currentPassword) {
                    foundUser.password = newPassword;
                    return true;
                }
                return false;
            };

            const requestPasswordReset = async (email) => {
                await new Promise(resolve => setTimeout(resolve, 1000));
                return mockUsers.some(u => u.email === email);
            };

            return React.createElement(AuthContext.Provider, {
                value: {
                    user,
                    login,
                    register,
                    logout,
                    updateProfile,
                    changePassword,
                    requestPasswordReset,
                    isLoading
                }
            }, children);
        }

        function useAuth() {
            const context = useContext(AuthContext);
            if (!context) {
                throw new Error('useAuth must be used within an AuthProvider');
            }
            return context;
        }

        // UI Components
        function Button({ children, onClick, className = '', variant = 'primary', type = 'button', disabled = false, ...props }) {
            const baseClasses = variant === 'primary' ? 'btn-primary' : 'btn-secondary';
            return React.createElement('button', {
                type,
                onClick,
                disabled,
                className: `${baseClasses} ${className}`,
                ...props
            }, children);
        }

        function Input({ className = '', ...props }) {
            return React.createElement('input', {
                className: `input ${className}`,
                ...props
            });
        }

        function Card({ children, className = '' }) {
            return React.createElement('div', {
                className: `card ${className}`
            }, children);
        }

        function CardHeader({ children, className = '' }) {
            return React.createElement('div', {
                className: `p-6 pb-2 ${className}`
            }, children);
        }

        function CardContent({ children, className = '' }) {
            return React.createElement('div', {
                className: `p-6 pt-0 ${className}`
            }, children);
        }

        function CardTitle({ children, className = '' }) {
            return React.createElement('h3', {
                className: `text-lg font-semibold ${className}`
            }, children);
        }

        function Alert({ children, variant = 'default', className = '' }) {
            const variantClasses = variant === 'destructive' 
                ? 'border-destructive bg-red-50 text-destructive' 
                : 'border bg-card text-card-foreground';
            
            return React.createElement('div', {
                className: `rounded-lg border p-4 ${variantClasses} ${className}`
            }, children);
        }

        function AlertTitle({ children }) {
            return React.createElement('h5', {
                className: 'mb-1 font-medium leading-none tracking-tight'
            }, children);
        }

        function AlertDescription({ children }) {
            return React.createElement('div', {
                className: 'text-sm opacity-90'
            }, children);
        }

        // Auth Components
        function LoginForm({ onForgotPassword, onRegister }) {
            const { login, isLoading } = useAuth();
            const [formData, setFormData] = useState({ email: '', password: '' });
            const [error, setError] = useState('');

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');

                if (!formData.email || !formData.password) {
                    setError('Please fill in all required fields');
                    return;
                }

                try {
                    const result = await login(formData.email, formData.password);
                    if (!result.success) {
                        setError(result.error || 'Login failed. Please try again.');
                    }
                } catch (err) {
                    setError('Login failed. Please try again.');
                }
            };

            return React.createElement(Card, { className: 'w-full max-w-md mx-auto' },
                React.createElement(CardHeader, { className: 'space-y-1 text-center' },
                    React.createElement('h1', { className: 'text-2xl font-semibold tracking-tight' }, 'Welcome to CliniTrack'),
                    React.createElement('p', { className: 'text-sm text-muted-foreground' }, 'Enter your credentials to access your account')
                ),
                React.createElement(CardContent, { className: 'space-y-4' },
                    React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
                        React.createElement('div', { className: 'space-y-2' },
                            React.createElement('label', { htmlFor: 'email', className: 'text-sm font-medium' }, 'Email'),
                            React.createElement(Input, {
                                id: 'email',
                                type: 'email',
                                placeholder: 'Enter your email',
                                value: formData.email,
                                onChange: (e) => setFormData(prev => ({ ...prev, email: e.target.value })),
                                disabled: isLoading
                            })
                        ),
                        React.createElement('div', { className: 'space-y-2' },
                            React.createElement('label', { htmlFor: 'password', className: 'text-sm font-medium' }, 'Password'),
                            React.createElement(Input, {
                                id: 'password',
                                type: 'password',
                                placeholder: 'Enter your password',
                                value: formData.password,
                                onChange: (e) => setFormData(prev => ({ ...prev, password: e.target.value })),
                                disabled: isLoading
                            })
                        ),
                        error && React.createElement(Alert, { variant: 'destructive' },
                            React.createElement(AlertDescription, null, error)
                        ),
                        React.createElement(Button, {
                            type: 'submit',
                            className: 'w-full',
                            disabled: isLoading
                        }, isLoading ? 'Signing in...' : 'Sign In')
                    ),
                    React.createElement('div', { className: 'text-center space-y-2' },
                        React.createElement('button', {
                            type: 'button',
                            className: 'text-sm text-primary hover:underline',
                            onClick: onForgotPassword
                        }, 'Forgot your password?'),
                        React.createElement('div', { className: 'text-sm' },
                            "Don't have an account? ",
                            React.createElement('button', {
                                type: 'button',
                                className: 'text-primary hover:underline',
                                onClick: onRegister
                            }, 'Register here')
                        )
                    ),
                    React.createElement('div', { className: 'mt-6 p-4 bg-muted rounded-lg' },
                        React.createElement('p', { className: 'text-sm font-medium mb-2' }, 'Demo Accounts:'),
                        React.createElement('div', { className: 'text-xs space-y-1' },
                            React.createElement('div', null, 'Doctor: doctor@clinitrack.com / doctor123'),
                            React.createElement('div', null, 'Secretary: secretary@clinitrack.com / secretary123')
                        )
                    )
                )
            );
        }

        function RegisterForm({ onBackToLogin }) {
            const { register, isLoading } = useAuth();
            const [formData, setFormData] = useState({
                name: '',
                email: '',
                password: '',
                confirmPassword: '',
                role: 'secretary'
            });
            const [error, setError] = useState('');

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');

                if (!formData.name || !formData.email || !formData.password || !formData.confirmPassword) {
                    setError('Please fill in all fields');
                    return;
                }

                if (formData.password !== formData.confirmPassword) {
                    setError('Passwords do not match');
                    return;
                }

                if (formData.password.length < 6) {
                    setError('Password must be at least 6 characters long');
                    return;
                }

                try {
                    const success = await register(formData.email, formData.password, formData.name, formData.role);
                    if (!success) {
                        setError('Registration failed. Email may already be in use.');
                    }
                } catch (err) {
                    setError('Registration failed. Please try again.');
                }
            };

            return React.createElement(Card, { className: 'w-full max-w-md mx-auto' },
                React.createElement(CardHeader, { className: 'space-y-1 text-center' },
                    React.createElement('h1', { className: 'text-2xl font-semibold tracking-tight' }, 'Create Account'),
                    React.createElement('p', { className: 'text-sm text-muted-foreground' }, 'Enter your information to create a new account')
                ),
                React.createElement(CardContent, { className: 'space-y-4' },
                    React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
                        React.createElement('div', { className: 'space-y-2' },
                            React.createElement('label', { className: 'text-sm font-medium' }, 'Full Name'),
                            React.createElement(Input, {
                                type: 'text',
                                placeholder: 'Enter your full name',
                                value: formData.name,
                                onChange: (e) => setFormData(prev => ({ ...prev, name: e.target.value })),
                                disabled: isLoading
                            })
                        ),
                        React.createElement('div', { className: 'space-y-2' },
                            React.createElement('label', { className: 'text-sm font-medium' }, 'Email'),
                            React.createElement(Input, {
                                type: 'email',
                                placeholder: 'Enter your email',
                                value: formData.email,
                                onChange: (e) => setFormData(prev => ({ ...prev, email: e.target.value })),
                                disabled: isLoading
                            })
                        ),
                        React.createElement('div', { className: 'space-y-2' },
                            React.createElement('label', { className: 'text-sm font-medium' }, 'Role'),
                            React.createElement('select', {
                                className: 'input',
                                value: formData.role,
                                onChange: (e) => setFormData(prev => ({ ...prev, role: e.target.value })),
                                disabled: isLoading
                            },
                                React.createElement('option', { value: 'secretary' }, 'Secretary'),
                                React.createElement('option', { value: 'doctor' }, 'Doctor')
                            )
                        ),
                        React.createElement('div', { className: 'space-y-2' },
                            React.createElement('label', { className: 'text-sm font-medium' }, 'Password'),
                            React.createElement(Input, {
                                type: 'password',
                                placeholder: 'Create a password',
                                value: formData.password,
                                onChange: (e) => setFormData(prev => ({ ...prev, password: e.target.value })),
                                disabled: isLoading
                            })
                        ),
                        React.createElement('div', { className: 'space-y-2' },
                            React.createElement('label', { className: 'text-sm font-medium' }, 'Confirm Password'),
                            React.createElement(Input, {
                                type: 'password',
                                placeholder: 'Confirm your password',
                                value: formData.confirmPassword,
                                onChange: (e) => setFormData(prev => ({ ...prev, confirmPassword: e.target.value })),
                                disabled: isLoading
                            })
                        ),
                        error && React.createElement(Alert, { variant: 'destructive' },
                            React.createElement(AlertDescription, null, error)
                        ),
                        React.createElement(Button, {
                            type: 'submit',
                            className: 'w-full',
                            disabled: isLoading
                        }, isLoading ? 'Creating Account...' : 'Create Account')
                    ),
                    React.createElement('div', { className: 'text-center' },
                        React.createElement('button', {
                            type: 'button',
                            className: 'text-sm text-primary hover:underline',
                            onClick: onBackToLogin
                        }, 'Already have an account? Sign in')
                    )
                )
            );
        }

        function ForgotPasswordForm({ onBackToLogin }) {
            const { requestPasswordReset, isLoading } = useAuth();
            const [email, setEmail] = useState('');
            const [message, setMessage] = useState('');
            const [error, setError] = useState('');

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setMessage('');

                if (!email) {
                    setError('Please enter your email address');
                    return;
                }

                try {
                    const success = await requestPasswordReset(email);
                    if (success) {
                        setMessage('If an account with this email exists, you will receive password reset instructions.');
                    } else {
                        setError('Failed to send reset instructions. Please try again.');
                    }
                } catch (err) {
                    setError('Failed to send reset instructions. Please try again.');
                }
            };

            return React.createElement(Card, { className: 'w-full max-w-md mx-auto' },
                React.createElement(CardHeader, { className: 'space-y-1 text-center' },
                    React.createElement('h1', { className: 'text-2xl font-semibold tracking-tight' }, 'Reset Password'),
                    React.createElement('p', { className: 'text-sm text-muted-foreground' }, 'Enter your email to receive reset instructions')
                ),
                React.createElement(CardContent, { className: 'space-y-4' },
                    React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
                        React.createElement('div', { className: 'space-y-2' },
                            React.createElement('label', { className: 'text-sm font-medium' }, 'Email'),
                            React.createElement(Input, {
                                type: 'email',
                                placeholder: 'Enter your email',
                                value: email,
                                onChange: (e) => setEmail(e.target.value),
                                disabled: isLoading
                            })
                        ),
                        error && React.createElement(Alert, { variant: 'destructive' },
                            React.createElement(AlertDescription, null, error)
                        ),
                        message && React.createElement(Alert, null,
                            React.createElement(AlertDescription, null, message)
                        ),
                        React.createElement(Button, {
                            type: 'submit',
                            className: 'w-full',
                            disabled: isLoading
                        }, isLoading ? 'Sending...' : 'Send Reset Instructions')
                    ),
                    React.createElement('div', { className: 'text-center' },
                        React.createElement('button', {
                            type: 'button',
                            className: 'text-sm text-primary hover:underline',
                            onClick: onBackToLogin
                        }, 'Back to sign in')
                    )
                )
            );
        }

        // Sidebar Component
        function Sidebar({ activeView, onViewChange }) {
            const { user, logout } = useAuth();

            const menuItems = user?.role === 'doctor' ? [
                { id: 'dashboard', label: 'Dashboard', icon: 'ðŸ“Š' },
                { id: 'patients', label: 'Patient Profiles', icon: 'ðŸ‘¥' },
                { id: 'risk-assessment', label: 'Risk Assessment', icon: 'âš¡' },
                { id: 'analytics', label: 'Analytics', icon: 'ðŸ“ˆ' },
                { id: 'settings', label: 'Settings', icon: 'âš™ï¸' },
                { id: 'help', label: 'Help', icon: 'â“' }
            ] : [
                { id: 'dashboard', label: 'Dashboard', icon: 'ðŸ“Š' },
                { id: 'new-patient', label: 'New Patient', icon: 'âž•' },
                { id: 'existing-patient', label: 'Existing Patients', icon: 'ðŸ‘¥' },
                { id: 'settings', label: 'Settings', icon: 'âš™ï¸' },
                { id: 'help', label: 'Help', icon: 'â“' }
            ];

            return React.createElement('div', { className: 'w-64 bg-card border-r border-border h-full flex flex-col' },
                React.createElement('div', { className: 'p-6 border-b border-border' },
                    React.createElement('h1', { className: 'text-xl font-bold text-primary' }, 'CliniTrack'),
                    React.createElement('p', { className: 'text-sm text-muted-foreground mt-1' }, user?.name),
                    React.createElement('p', { className: 'text-xs text-muted-foreground capitalize' }, user?.role)
                ),
                React.createElement('nav', { className: 'flex-1 p-4' },
                    React.createElement('ul', { className: 'space-y-2' },
                        menuItems.map(item => 
                            React.createElement('li', { key: item.id },
                                React.createElement('button', {
                                    className: `w-full text-left px-3 py-2 rounded-md transition-colors ${
                                        activeView === item.id 
                                            ? 'bg-primary text-primary-foreground' 
                                            : 'hover:bg-accent hover:text-accent-foreground'
                                    }`,
                                    onClick: () => onViewChange(item.id)
                                },
                                    React.createElement('span', { className: 'mr-2' }, item.icon),
                                    item.label
                                )
                            )
                        )
                    )
                ),
                React.createElement('div', { className: 'p-4 border-t border-border' },
                    React.createElement(Button, {
                        onClick: logout,
                        variant: 'secondary',
                        className: 'w-full'
                    }, 'Sign Out')
                )
            );
        }

        // Dashboard Component
        function DashboardOverview({ patients, labResults, visits, riskAssessments, onViewChange }) {
            const { user } = useAuth();

            const stats = {
                totalPatients: patients.length,
                newPatientsThisMonth: patients.filter(p => 
                    new Date(p.createdAt).getMonth() === new Date().getMonth()
                ).length,
                highRiskPatients: riskAssessments.filter(r => r.riskLevel === 'High').length,
                pendingResults: labResults.filter(r => !r.results).length
            };

            return React.createElement('div', { className: 'space-y-6' },
                React.createElement('div', null,
                    React.createElement('h1', { className: 'text-2xl font-semibold' }, `Welcome back, ${user?.name}`),
                    React.createElement('p', { className: 'text-muted-foreground' }, 'Here\'s what\'s happening with your patients today.')
                ),
                React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6' },
                    React.createElement(Card, null,
                        React.createElement(CardHeader, { className: 'pb-2' },
                            React.createElement(CardTitle, { className: 'text-sm font-medium' }, 'Total Patients')
                        ),
                        React.createElement(CardContent, null,
                            React.createElement('div', { className: 'text-2xl font-bold' }, stats.totalPatients),
                            React.createElement('p', { className: 'text-xs text-muted-foreground' }, 'Active in system')
                        )
                    ),
                    React.createElement(Card, null,
                        React.createElement(CardHeader, { className: 'pb-2' },
                            React.createElement(CardTitle, { className: 'text-sm font-medium' }, 'New This Month')
                        ),
                        React.createElement(CardContent, null,
                            React.createElement('div', { className: 'text-2xl font-bold' }, stats.newPatientsThisMonth),
                            React.createElement('p', { className: 'text-xs text-muted-foreground' }, 'Recently registered')
                        )
                    ),
                    React.createElement(Card, null,
                        React.createElement(CardHeader, { className: 'pb-2' },
                            React.createElement(CardTitle, { className: 'text-sm font-medium' }, 'High Risk')
                        ),
                        React.createElement(CardContent, null,
                            React.createElement('div', { className: 'text-2xl font-bold text-destructive' }, stats.highRiskPatients),
                            React.createElement('p', { className: 'text-xs text-muted-foreground' }, 'Require attention')
                        )
                    ),
                    React.createElement(Card, null,
                        React.createElement(CardHeader, { className: 'pb-2' },
                            React.createElement(CardTitle, { className: 'text-sm font-medium' }, 'Lab Results')
                        ),
                        React.createElement(CardContent, null,
                            React.createElement('div', { className: 'text-2xl font-bold' }, labResults.length),
                            React.createElement('p', { className: 'text-xs text-muted-foreground' }, 'Total results')
                        )
                    )
                ),
                React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-2 gap-6' },
                    React.createElement(Card, null,
                        React.createElement(CardHeader, null,
                            React.createElement(CardTitle, null, 'Recent Patients')
                        ),
                        React.createElement(CardContent, null,
                            React.createElement('div', { className: 'space-y-4' },
                                patients.slice(0, 5).map(patient => 
                                    React.createElement('div', { 
                                        key: patient.id, 
                                        className: 'flex items-center justify-between p-3 border rounded-lg' 
                                    },
                                        React.createElement('div', null,
                                            React.createElement('p', { className: 'font-medium' }, patient.name),
                                            React.createElement('p', { className: 'text-sm text-muted-foreground' }, 
                                                `${patient.age} years old â€¢ ${patient.gender}`
                                            )
                                        ),
                                        React.createElement('button', {
                                            className: 'text-sm text-primary hover:underline',
                                            onClick: () => onViewChange(user?.role === 'doctor' ? 'patients' : 'existing-patient')
                                        }, 'View')
                                    )
                                )
                            )
                        )
                    ),
                    React.createElement(Card, null,
                        React.createElement(CardHeader, null,
                            React.createElement(CardTitle, null, 'Quick Actions')
                        ),
                        React.createElement(CardContent, null,
                            React.createElement('div', { className: 'space-y-3' },
                                user?.role === 'secretary' ? [
                                    React.createElement(Button, {
                                        key: 'new-patient',
                                        onClick: () => onViewChange('new-patient'),
                                        className: 'w-full justify-start'
                                    }, 'âž• Register New Patient'),
                                    React.createElement(Button, {
                                        key: 'existing-patient',
                                        onClick: () => onViewChange('existing-patient'),
                                        variant: 'secondary',
                                        className: 'w-full justify-start'
                                    }, 'ðŸ‘¥ Manage Existing Patients')
                                ] : [
                                    React.createElement(Button, {
                                        key: 'risk-assessment',
                                        onClick: () => onViewChange('risk-assessment'),
                                        className: 'w-full justify-start'
                                    }, 'âš¡ Perform Risk Assessment'),
                                    React.createElement(Button, {
                                        key: 'analytics',
                                        onClick: () => onViewChange('analytics'),
                                        variant: 'secondary',
                                        className: 'w-full justify-start'
                                    }, 'ðŸ“ˆ View Analytics')
                                ]
                            )
                        )
                    )
                )
            );
        }

        // Simple placeholder components for other views
        function NewPatientForm({ onPatientCreated }) {
            const [formData, setFormData] = useState({
                name: '',
                age: '',
                gender: 'Female',
                email: '',
                phone: '',
                address: '',
                emergencyContact: { name: '', phone: '', relationship: '' },
                medicalHistory: '',
                allergies: ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                const newPatient = {
                    id: Date.now().toString(),
                    ...formData,
                    age: parseInt(formData.age),
                    medicalHistory: formData.medicalHistory.split(',').map(s => s.trim()).filter(Boolean),
                    allergies: formData.allergies.split(',').map(s => s.trim()).filter(Boolean),
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                onPatientCreated(newPatient);
                alert('Patient registered successfully!');
                setFormData({
                    name: '',
                    age: '',
                    gender: 'Female',
                    email: '',
                    phone: '',
                    address: '',
                    emergencyContact: { name: '', phone: '', relationship: '' },
                    medicalHistory: '',
                    allergies: ''
                });
            };

            return React.createElement('div', { className: 'max-w-2xl mx-auto' },
                React.createElement('h1', { className: 'text-2xl font-semibold mb-6' }, 'Register New Patient'),
                React.createElement(Card, null,
                    React.createElement(CardContent, { className: 'p-6' },
                        React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
                            React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                                React.createElement('div', null,
                                    React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Full Name'),
                                    React.createElement(Input, {
                                        value: formData.name,
                                        onChange: (e) => setFormData(prev => ({ ...prev, name: e.target.value })),
                                        required: true
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Age'),
                                    React.createElement(Input, {
                                        type: 'number',
                                        value: formData.age,
                                        onChange: (e) => setFormData(prev => ({ ...prev, age: e.target.value })),
                                        required: true
                                    })
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Gender'),
                                React.createElement('select', {
                                    className: 'input',
                                    value: formData.gender,
                                    onChange: (e) => setFormData(prev => ({ ...prev, gender: e.target.value }))
                                },
                                    React.createElement('option', { value: 'Female' }, 'Female'),
                                    React.createElement('option', { value: 'Male' }, 'Male'),
                                    React.createElement('option', { value: 'Other' }, 'Other')
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Email'),
                                React.createElement(Input, {
                                    type: 'email',
                                    value: formData.email,
                                    onChange: (e) => setFormData(prev => ({ ...prev, email: e.target.value })),
                                    required: true
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Phone'),
                                React.createElement(Input, {
                                    type: 'tel',
                                    value: formData.phone,
                                    onChange: (e) => setFormData(prev => ({ ...prev, phone: e.target.value })),
                                    required: true
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Address'),
                                React.createElement('textarea', {
                                    className: 'input min-h-20',
                                    value: formData.address,
                                    onChange: (e) => setFormData(prev => ({ ...prev, address: e.target.value })),
                                    required: true
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Medical History (comma-separated)'),
                                React.createElement('textarea', {
                                    className: 'input min-h-20',
                                    value: formData.medicalHistory,
                                    onChange: (e) => setFormData(prev => ({ ...prev, medicalHistory: e.target.value })),
                                    placeholder: 'e.g., Hypertension, Diabetes'
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Allergies (comma-separated)'),
                                React.createElement('textarea', {
                                    className: 'input min-h-20',
                                    value: formData.allergies,
                                    onChange: (e) => setFormData(prev => ({ ...prev, allergies: e.target.value })),
                                    placeholder: 'e.g., Penicillin, Shellfish'
                                })
                            ),
                            React.createElement(Button, { type: 'submit', className: 'w-full' }, 'Register Patient')
                        )
                    )
                )
            );
        }

        function ExistingPatients({ patients }) {
            return React.createElement('div', null,
                React.createElement('h1', { className: 'text-2xl font-semibold mb-6' }, 'Existing Patients'),
                React.createElement('div', { className: 'space-y-4' },
                    patients.map(patient => 
                        React.createElement(Card, { key: patient.id },
                            React.createElement(CardContent, { className: 'p-6' },
                                React.createElement('div', { className: 'flex justify-between items-start' },
                                    React.createElement('div', null,
                                        React.createElement('h3', { className: 'font-medium text-lg' }, patient.name),
                                        React.createElement('p', { className: 'text-muted-foreground' }, 
                                            `${patient.age} years old â€¢ ${patient.gender}`
                                        ),
                                        React.createElement('p', { className: 'text-sm text-muted-foreground' }, patient.email)
                                    ),
                                    React.createElement(Button, { variant: 'secondary' }, 'View Details')
                                )
                            )
                        )
                    )
                )
            );
        }

        function PatientProfiles({ patients, labResults, visits, riskAssessments }) {
            return React.createElement('div', null,
                React.createElement('h1', { className: 'text-2xl font-semibold mb-6' }, 'Patient Profiles'),
                React.createElement('div', { className: 'space-y-4' },
                    patients.map(patient => {
                        const patientRisk = riskAssessments.find(r => r.patientId === patient.id);
                        const patientVisits = visits.filter(v => v.patientId === patient.id);
                        const patientLabs = labResults.filter(l => l.patientId === patient.id);

                        return React.createElement(Card, { key: patient.id },
                            React.createElement(CardContent, { className: 'p-6' },
                                React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-3 gap-6' },
                                    React.createElement('div', null,
                                        React.createElement('h3', { className: 'font-medium text-lg mb-2' }, patient.name),
                                        React.createElement('p', { className: 'text-muted-foreground mb-1' }, 
                                            `${patient.age} years old â€¢ ${patient.gender}`
                                        ),
                                        React.createElement('p', { className: 'text-sm text-muted-foreground' }, patient.email),
                                        patientRisk && React.createElement('div', { 
                                            className: `mt-2 px-2 py-1 rounded text-xs font-medium ${
                                                patientRisk.riskLevel === 'High' ? 'bg-red-100 text-red-800' :
                                                patientRisk.riskLevel === 'Moderate' ? 'bg-yellow-100 text-yellow-800' :
                                                'bg-green-100 text-green-800'
                                            }`
                                        }, `${patientRisk.riskLevel} Risk`)
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('h4', { className: 'font-medium mb-2' }, 'Medical History'),
                                        React.createElement('ul', { className: 'text-sm space-y-1' },
                                            patient.medicalHistory.map((item, idx) => 
                                                React.createElement('li', { key: idx }, `â€¢ ${item}`)
                                            )
                                        )
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('h4', { className: 'font-medium mb-2' }, 'Recent Activity'),
                                        React.createElement('div', { className: 'text-sm space-y-1' },
                                            React.createElement('p', null, `Visits: ${patientVisits.length}`),
                                            React.createElement('p', null, `Lab Results: ${patientLabs.length}`)
                                        )
                                    )
                                )
                            )
                        );
                    })
                )
            );
        }

        function RiskAssessmentComponent({ patients, onRiskAssessmentCreate }) {
            const [selectedPatient, setSelectedPatient] = useState('');
            const [symptoms, setSymptoms] = useState('');
            const [assessment, setAssessment] = useState(null);

            const performAssessment = () => {
                if (!selectedPatient || !symptoms) {
                    alert('Please select a patient and enter symptoms');
                    return;
                }

                const symptomList = symptoms.split(',').map(s => s.trim()).filter(Boolean);
                const riskLevel = symptomList.length > 3 ? 'High' : symptomList.length > 1 ? 'Moderate' : 'Low';
                
                const newAssessment = {
                    id: Date.now().toString(),
                    patientId: selectedPatient,
                    visitId: Date.now().toString(),
                    symptoms: symptomList,
                    riskLevel,
                    confidence: Math.floor(Math.random() * 30) + 70,
                    factors: ['Medical history', 'Current symptoms', 'Age factor'],
                    recommendation: `Monitor patient closely. ${riskLevel} risk level detected.`,
                    date: new Date().toISOString(),
                    doctorNotes: ''
                };

                setAssessment(newAssessment);
                onRiskAssessmentCreate(newAssessment);
            };

            return React.createElement('div', { className: 'max-w-2xl mx-auto' },
                React.createElement('h1', { className: 'text-2xl font-semibold mb-6' }, 'AI Risk Assessment'),
                React.createElement(Card, null,
                    React.createElement(CardContent, { className: 'p-6 space-y-4' },
                        React.createElement('div', null,
                            React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Select Patient'),
                            React.createElement('select', {
                                className: 'input',
                                value: selectedPatient,
                                onChange: (e) => setSelectedPatient(e.target.value)
                            },
                                React.createElement('option', { value: '' }, 'Choose a patient...'),
                                patients.map(patient => 
                                    React.createElement('option', { key: patient.id, value: patient.id }, patient.name)
                                )
                            )
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Symptoms (comma-separated)'),
                            React.createElement('textarea', {
                                className: 'input min-h-20',
                                value: symptoms,
                                onChange: (e) => setSymptoms(e.target.value),
                                placeholder: 'e.g., fatigue, chest pain, shortness of breath'
                            })
                        ),
                        React.createElement(Button, { onClick: performAssessment }, 'Perform Assessment'),
                        assessment && React.createElement('div', { className: 'mt-6 p-4 border rounded-lg' },
                            React.createElement('h3', { className: 'font-medium mb-2' }, 'Assessment Results'),
                            React.createElement('div', { className: 'space-y-2' },
                                React.createElement('p', null, 
                                    React.createElement('strong', null, 'Risk Level: '),
                                    React.createElement('span', { 
                                        className: `px-2 py-1 rounded text-sm ${
                                            assessment.riskLevel === 'High' ? 'bg-red-100 text-red-800' :
                                            assessment.riskLevel === 'Moderate' ? 'bg-yellow-100 text-yellow-800' :
                                            'bg-green-100 text-green-800'
                                        }`
                                    }, assessment.riskLevel)
                                ),
                                React.createElement('p', null, 
                                    React.createElement('strong', null, 'Confidence: '), 
                                    `${assessment.confidence}%`
                                ),
                                React.createElement('p', null, 
                                    React.createElement('strong', null, 'Recommendation: '), 
                                    assessment.recommendation
                                )
                            )
                        )
                    )
                )
            );
        }

        function Analytics({ patients, riskAssessments }) {
            const highRisk = riskAssessments.filter(r => r.riskLevel === 'High').length;
            const moderateRisk = riskAssessments.filter(r => r.riskLevel === 'Moderate').length;
            const lowRisk = riskAssessments.filter(r => r.riskLevel === 'Low').length;

            return React.createElement('div', null,
                React.createElement('h1', { className: 'text-2xl font-semibold mb-6' }, 'Analytics Dashboard'),
                React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6 mb-6' },
                    React.createElement(Card, null,
                        React.createElement(CardContent, { className: 'p-6 text-center' },
                            React.createElement('div', { className: 'text-2xl font-bold text-red-600' }, highRisk),
                            React.createElement('p', { className: 'text-sm text-muted-foreground' }, 'High Risk Patients')
                        )
                    ),
                    React.createElement(Card, null,
                        React.createElement(CardContent, { className: 'p-6 text-center' },
                            React.createElement('div', { className: 'text-2xl font-bold text-yellow-600' }, moderateRisk),
                            React.createElement('p', { className: 'text-sm text-muted-foreground' }, 'Moderate Risk Patients')
                        )
                    ),
                    React.createElement(Card, null,
                        React.createElement(CardContent, { className: 'p-6 text-center' },
                            React.createElement('div', { className: 'text-2xl font-bold text-green-600' }, lowRisk),
                            React.createElement('p', { className: 'text-sm text-muted-foreground' }, 'Low Risk Patients')
                        )
                    )
                ),
                React.createElement(Card, null,
                    React.createElement(CardHeader, null,
                        React.createElement(CardTitle, null, 'Risk Distribution')
                    ),
                    React.createElement(CardContent, null,
                        React.createElement('div', { className: 'space-y-4' },
                            React.createElement('div', null,
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', { className: 'text-sm' }, 'High Risk'),
                                    React.createElement('span', { className: 'text-sm' }, `${highRisk} patients`)
                                ),
                                React.createElement('div', { className: 'w-full bg-gray-200 rounded-full h-2' },
                                    React.createElement('div', { 
                                        className: 'bg-red-500 h-2 rounded-full',
                                        style: { width: `${(highRisk / Math.max(patients.length, 1)) * 100}%` }
                                    })
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', { className: 'text-sm' }, 'Moderate Risk'),
                                    React.createElement('span', { className: 'text-sm' }, `${moderateRisk} patients`)
                                ),
                                React.createElement('div', { className: 'w-full bg-gray-200 rounded-full h-2' },
                                    React.createElement('div', { 
                                        className: 'bg-yellow-500 h-2 rounded-full',
                                        style: { width: `${(moderateRisk / Math.max(patients.length, 1)) * 100}%` }
                                    })
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', { className: 'text-sm' }, 'Low Risk'),
                                    React.createElement('span', { className: 'text-sm' }, `${lowRisk} patients`)
                                ),
                                React.createElement('div', { className: 'w-full bg-gray-200 rounded-full h-2' },
                                    React.createElement('div', { 
                                        className: 'bg-green-500 h-2 rounded-full',
                                        style: { width: `${(lowRisk / Math.max(patients.length, 1)) * 100}%` }
                                    })
                                )
                            )
                        )
                    )
                )
            );
        }

        function SettingsPage() {
            const { user, updateProfile, changePassword } = useAuth();
            const [profileData, setProfileData] = useState({
                name: user?.name || '',
                email: user?.email || ''
            });
            const [passwordData, setPasswordData] = useState({
                currentPassword: '',
                newPassword: '',
                confirmPassword: ''
            });
            const [messages, setMessages] = useState({ profile: '', password: '' });
            const [errors, setErrors] = useState({ profile: '', password: '' });

            const handleProfileUpdate = async (e) => {
                e.preventDefault();
                setMessages({ profile: '', password: '' });
                setErrors({ profile: '', password: '' });

                if (!profileData.name || !profileData.email) {
                    setErrors(prev => ({ ...prev, profile: 'Please fill in all fields' }));
                    return;
                }

                try {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    updateProfile(profileData);
                    setMessages(prev => ({ ...prev, profile: 'Profile updated successfully' }));
                } catch (err) {
                    setErrors(prev => ({ ...prev, profile: 'Failed to update profile' }));
                }
            };

            const handlePasswordChange = async (e) => {
                e.preventDefault();
                setMessages({ profile: '', password: '' });
                setErrors({ profile: '', password: '' });

                if (!passwordData.currentPassword || !passwordData.newPassword || !passwordData.confirmPassword) {
                    setErrors(prev => ({ ...prev, password: 'Please fill in all fields' }));
                    return;
                }

                if (passwordData.newPassword !== passwordData.confirmPassword) {
                    setErrors(prev => ({ ...prev, password: 'New passwords do not match' }));
                    return;
                }

                try {
                    const success = await changePassword(passwordData.currentPassword, passwordData.newPassword);
                    if (success) {
                        setMessages(prev => ({ ...prev, password: 'Password changed successfully' }));
                        setPasswordData({ currentPassword: '', newPassword: '', confirmPassword: '' });
                    } else {
                        setErrors(prev => ({ ...prev, password: 'Current password is incorrect' }));
                    }
                } catch (err) {
                    setErrors(prev => ({ ...prev, password: 'Failed to change password' }));
                }
            };

            return React.createElement('div', { className: 'max-w-2xl mx-auto space-y-6' },
                React.createElement('h1', { className: 'text-2xl font-semibold' }, 'Settings'),
                React.createElement(Card, null,
                    React.createElement(CardHeader, null,
                        React.createElement(CardTitle, null, 'Profile Information')
                    ),
                    React.createElement(CardContent, null,
                        React.createElement('form', { onSubmit: handleProfileUpdate, className: 'space-y-4' },
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Name'),
                                React.createElement(Input, {
                                    value: profileData.name,
                                    onChange: (e) => setProfileData(prev => ({ ...prev, name: e.target.value }))
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Email'),
                                React.createElement(Input, {
                                    type: 'email',
                                    value: profileData.email,
                                    onChange: (e) => setProfileData(prev => ({ ...prev, email: e.target.value }))
                                })
                            ),
                            messages.profile && React.createElement(Alert, null,
                                React.createElement(AlertDescription, null, messages.profile)
                            ),
                            errors.profile && React.createElement(Alert, { variant: 'destructive' },
                                React.createElement(AlertDescription, null, errors.profile)
                            ),
                            React.createElement(Button, { type: 'submit' }, 'Update Profile')
                        )
                    )
                ),
                React.createElement(Card, null,
                    React.createElement(CardHeader, null,
                        React.createElement(CardTitle, null, 'Change Password')
                    ),
                    React.createElement(CardContent, null,
                        React.createElement('form', { onSubmit: handlePasswordChange, className: 'space-y-4' },
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Current Password'),
                                React.createElement(Input, {
                                    type: 'password',
                                    value: passwordData.currentPassword,
                                    onChange: (e) => setPasswordData(prev => ({ ...prev, currentPassword: e.target.value }))
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'New Password'),
                                React.createElement(Input, {
                                    type: 'password',
                                    value: passwordData.newPassword,
                                    onChange: (e) => setPasswordData(prev => ({ ...prev, newPassword: e.target.value }))
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-1' }, 'Confirm New Password'),
                                React.createElement(Input, {
                                    type: 'password',
                                    value: passwordData.confirmPassword,
                                    onChange: (e) => setPasswordData(prev => ({ ...prev, confirmPassword: e.target.value }))
                                })
                            ),
                            messages.password && React.createElement(Alert, null,
                                React.createElement(AlertDescription, null, messages.password)
                            ),
                            errors.password && React.createElement(Alert, { variant: 'destructive' },
                                React.createElement(AlertDescription, null, errors.password)
                            ),
                            React.createElement(Button, { type: 'submit' }, 'Change Password')
                        )
                    )
                )
            );
        }

        function HelpPage() {
            return React.createElement('div', { className: 'max-w-4xl mx-auto space-y-6' },
                React.createElement('h1', { className: 'text-2xl font-semibold' }, 'Help & Support'),
                React.createElement(Card, null,
                    React.createElement(CardHeader, null,
                        React.createElement(CardTitle, null, 'Getting Started')
                    ),
                    React.createElement(CardContent, null,
                        React.createElement('div', { className: 'space-y-4' },
                            React.createElement('p', null, 'Welcome to CliniTrack! This system helps manage patient records and risk assessments.'),
                            React.createElement('div', null,
                                React.createElement('h4', { className: 'font-medium mb-2' }, 'For Secretaries:'),
                                React.createElement('ul', { className: 'list-disc list-inside space-y-1 text-sm' },
                                    React.createElement('li', null, 'Register new patients using the "New Patient" form'),
                                    React.createElement('li', null, 'Manage existing patient records'),
                                    React.createElement('li', null, 'Upload lab results and medical documents')
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('h4', { className: 'font-medium mb-2' }, 'For Doctors:'),
                                React.createElement('ul', { className: 'list-disc list-inside space-y-1 text-sm' },
                                    React.createElement('li', null, 'View complete patient profiles'),
                                    React.createElement('li', null, 'Perform AI-powered risk assessments'),
                                    React.createElement('li', null, 'Access analytics and insights'),
                                    React.createElement('li', null, 'Add clinical notes and recommendations')
                                )
                            )
                        )
                    )
                ),
                React.createElement(Card, null,
                    React.createElement(CardHeader, null,
                        React.createElement(CardTitle, null, 'Contact Support')
                    ),
                    React.createElement(CardContent, null,
                        React.createElement('p', null, 'If you need assistance, please contact our support team:'),
                        React.createElement('div', { className: 'mt-4 space-y-2' },
                            React.createElement('p', null, 'ðŸ“§ Email: support@clinitrack.com'),
                            React.createElement('p', null, 'ðŸ“ž Phone: +1 (555) 123-HELP'),
                            React.createElement('p', null, 'â° Hours: Monday-Friday, 9 AM - 5 PM EST')
                        )
                    )
                )
            );
        }

        // Main App Component
        function AppContent() {
            const { user, isLoading } = useAuth();
            const [authView, setAuthView] = useState('login');
            const [activeView, setActiveView] = useState('dashboard');
            
            const [patients, setPatients] = useState(mockPatients);
            const [labResults, setLabResults] = useState(mockLabResults);
            const [visits, setVisits] = useState(mockVisits);
            const [riskAssessments, setRiskAssessments] = useState(mockRiskAssessments);

            const handlePatientCreated = (patient) => {
                setPatients(prev => [...prev, patient]);
            };

            const handleRiskAssessmentCreate = (assessment) => {
                setRiskAssessments(prev => [...prev, assessment]);
            };

            if (isLoading) {
                return React.createElement('div', { 
                    className: 'min-h-screen flex items-center justify-center bg-background' 
                },
                    React.createElement('div', { className: 'flex flex-col items-center space-y-4' },
                        React.createElement('div', { className: 'loading-spinner' }),
                        React.createElement('p', { className: 'text-muted-foreground' }, 'Loading CliniTrack...')
                    )
                );
            }

            if (!user) {
                return React.createElement('div', { 
                    className: 'min-h-screen bg-background flex items-center justify-center p-4' 
                },
                    React.createElement('div', { className: 'w-full max-w-md' },
                        authView === 'login' && React.createElement(LoginForm, {
                            onForgotPassword: () => setAuthView('forgot'),
                            onRegister: () => setAuthView('register')
                        }),
                        authView === 'register' && React.createElement(RegisterForm, {
                            onBackToLogin: () => setAuthView('login')
                        }),
                        authView === 'forgot' && React.createElement(ForgotPasswordForm, {
                            onBackToLogin: () => setAuthView('login')
                        })
                    )
                );
            }

            const renderActiveView = () => {
                switch (activeView) {
                    case 'dashboard':
                        return React.createElement(DashboardOverview, {
                            patients,
                            labResults,
                            visits,
                            riskAssessments,
                            onViewChange: setActiveView
                        });
                    case 'new-patient':
                        return React.createElement(NewPatientForm, {
                            onPatientCreated: handlePatientCreated
                        });
                    case 'existing-patient':
                        return React.createElement(ExistingPatients, { patients });
                    case 'patients':
                        return React.createElement(PatientProfiles, {
                            patients,
                            labResults,
                            visits,
                            riskAssessments
                        });
                    case 'risk-assessment':
                        return React.createElement(RiskAssessmentComponent, {
                            patients,
                            onRiskAssessmentCreate: handleRiskAssessmentCreate
                        });
                    case 'analytics':
                        return React.createElement(Analytics, {
                            patients,
                            riskAssessments
                        });
                    case 'settings':
                        return React.createElement(SettingsPage);
                    case 'help':
                        return React.createElement(HelpPage);
                    default:
                        return React.createElement(DashboardOverview, {
                            patients,
                            labResults,
                            visits,
                            riskAssessments,
                            onViewChange: setActiveView
                        });
                }
            };

            return React.createElement('div', { className: 'flex h-screen bg-background' },
                React.createElement(Sidebar, { activeView, onViewChange: setActiveView }),
                React.createElement('main', { className: 'flex-1 overflow-hidden' },
                    React.createElement('div', { className: 'h-full overflow-y-auto' },
                        React.createElement('div', { className: 'container mx-auto p-6 max-w-7xl' },
                            renderActiveView()
                        )
                    )
                )
            );
        }

        function App() {
            return React.createElement(AuthProvider, null,
                React.createElement(AppContent)
            );
        }

        // Render the app
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>